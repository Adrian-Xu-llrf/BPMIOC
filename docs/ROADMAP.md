# 🗺️ BPMIOC 学习路线图

> **版本**: 2.0
> **更新日期**: 2025-11-07

## 🎯 三个学习层次

根据你的目标和时间，选择适合的学习层次：

```
┌─────────────────────────────────────────────────────────────────┐
│  层次1: 基础复现 - "我要让它跑起来"                             │
│  ⏱️  时间: 1-2周  |  📚 文档: Part 1, 2  |  🧪 实验: 5个         │
│  ✅ 能编译运行  ✅ 能访问PV  ✅ 理解基本概念                     │
└─────────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│  层次2: 功能复现 - "我要理解它怎么工作"                         │
│  ⏱️  时间: 3-6周  |  📚 文档: Part 3-6  |  🧪 实验: 10个        │
│  ✅ 理解架构  ✅ 能追踪数据流  ✅ 能修改代码                     │
└─────────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│  层次3: 完整复现 - "我要独立开发类似项目"                       │
│  ⏱️  时间: 7-8周  |  📚 文档: Part 9, 13  |  🧪 实验: 15个      │
│  ✅ 能独立设计  ✅ 能从零开发  ✅ 能部署上线                     │
└─────────────────────────────────────────────────────────────────┘
```

## 📅 详细学习路径

### 🔴 层次1: 基础复现（1-2周）

**目标**: 能运行IOC，访问PV，理解基本概念

#### 第1周

**周一-周二**: 环境搭建
```
📖 QUICK_START.md (30分钟)
📚 Part 1: 快速复现
   ├── 01-introduction.md
   ├── 02-prerequisites.md
   ├── 03-install-epics.md
   ├── 04-clone-and-compile.md
   └── 05-enable-simulation.md

✅ 检查点: IOC能在模拟模式下运行
```

**周三-周四**: EPICS基础
```
📚 Part 2: 理解基础
   ├── 01-what-is-epics.md
   ├── 02-key-concepts.md
   ├── 03-your-first-ioc.md
   ├── 04-record-types.md
   └── 05-scanning-basics.md

✅ 检查点: 能创建简单的IOC和数据库
```

**周五**: 实践
```
🧪 Part 8: 基础实验
   └── lab01-trace-rf-amp.md

✅ 检查点: 能追踪RF3Amp从硬件到PV的完整流程
```

**周末**: 复习和实验
```
📖 复习本周内容
🧪 完成 lab02-modify-scan.md
🧪 完成 lab03-add-debug.md

✅ 检查点: 能用caget/caput/Python访问所有主要PV
```

#### 完成标准
- [ ] BPMIOC在模拟模式下稳定运行
- [ ] 理解PV、Record、IOC、Channel Access等概念
- [ ] 能用CA工具和Python访问PV
- [ ] 能创建简单的数据库文件
- [ ] 完成基础实验1-3

**下一步**: 如果只需要使用BPMIOC，到此即可。如果想深入开发，继续层次2。

---

### 🟠 层次2: 功能复现（3-6周）

**目标**: 理解三层架构，能修改代码，添加简单功能

#### 第2周: 架构理解

**周一-周三**: 系统架构
```
📚 Part 3: BPMIOC架构
   ├── 01-project-overview.md
   ├── 02-directory-structure.md
   ├── 03-three-layer-design.md      ⭐ 核心
   ├── 04-data-flow.md                ⭐ 核心
   └── 05-initialization.md

✅ 检查点: 能画出三层架构图和数据流图
```

**周四-周五**: C语言进阶
```
📚 Part 2: 理解基础
   └── 10-c-essentials.md
      ├── 指针复习
      ├── 函数指针                    ⭐ 重点
      ├── 动态库（dlopen/dlsym）      ⭐ 重点
      └── 多线程

✅ 检查点: 理解函数指针和dlopen机制
```

**周末**: 实验
```
🧪 lab04-understand-init.md         # 理解初始化流程
🧪 lab05-waveform-plot.md           # 波形数据可视化

✅ 检查点: 能追踪InitDevice()的完整流程
```

#### 第3-4周: 驱动层

**第3周**: 驱动层理解
```
📚 Part 4: 驱动层详解
   ├── 01-overview.md
   ├── 02-file-structure.md
   ├── 03-global-data.md              ⭐ 重要
   ├── 04-offset-system.md            ⭐ 重要
   ├── 05-function-pointers.md
   ├── 06-init-device.md
   ├── 07-read-data.md
   └── 09-background-thread.md        ⭐ 核心

✅ 检查点: 理解driverWrapper.c的每个主要函数
```

**第4周**: 驱动层修改
```
🧪 lab06-add-max-min.md              # 添加最大最小值监测
🧪 lab07-add-statistics.md           # 添加统计功能

📖 自己设计: 添加移动平均滤波

✅ 检查点: 能在驱动层添加新的数据处理功能
```

#### 第5周: 设备支持层

**周一-周三**: 设备支持理解
```
📚 Part 5: 设备支持层
   ├── 01-overview.md
   ├── 02-dset-structure.md
   ├── 03-lifecycle.md                ⭐ 重要
   ├── 04-file-structure.md
   ├── 05-private-data.md
   ├── 06-parameter-parsing.md        ⭐ 重要
   └── 11-io-interrupt-impl.md        ⭐ 核心

✅ 检查点: 理解DSET结构和生命周期
```

**周四-周五**: 设备支持修改
```
🧪 lab08-alarm-system.md             # 构建告警系统
🧪 lab09-data-filter.md              # 实现数据滤波

✅ 检查点: 能添加新的记录类型支持
```

#### 第6周: 数据库层

**周一-周三**: 数据库设计
```
📚 Part 6: 数据库层
   ├── 01-overview.md
   ├── 02-bpmmonitor-db.md            ⭐ 核心
   ├── 04-macro-system.md
   ├── 05-rf-channels.md
   └── 11-complete-pv-list.md         ⭐ 参考

✅ 检查点: 理解数据库设计和PV命名规范
```

**周四-周五**: 数据库修改
```
🧪 lab10-new-record.md               # 添加新记录类型

📖 自己设计: 为新功能添加完整的PV配置

✅ 检查点: 能设计和实现完整的PV配置
```

**周末**: 调试和测试
```
📚 Part 10: 调试与测试
   ├── 01-debugging-strategy.md
   ├── 03-printf-debug.md
   ├── 04-gdb-tutorial.md
   └── 09-test-scripts.md

🧪 为你添加的功能编写测试脚本

✅ 检查点: 掌握调试技巧，能独立解决问题
```

#### 完成标准
- [ ] 理解三层架构的职责和交互
- [ ] 能追踪任意PV的完整数据流
- [ ] 能在三层各自添加新功能
- [ ] 能使用GDB和printf调试
- [ ] 完成修改实验6-10

**下一步**: 如果能满足现有开发需求，到此即可。如果想独立开发项目，继续层次3。

---

### 🟡 层次3: 完整复现（7-8周）

**目标**: 从零搭建类似项目，部署到真实硬件

#### 第7周: 综合开发

**周一-周三**: 完整教程
```
📚 Part 9: 完整教程
   └── tutorial01-add-new-pv/
       ├── 01-requirement.md          # 需求分析
       ├── 02-driver-layer.md         # 驱动层实现
       ├── 03-device-support.md       # 设备支持实现
       ├── 04-database.md             # 数据库设计
       └── 05-compile-test.md         # 编译测试

🧪 跟随教程完成一个完整的功能模块

✅ 检查点: 能独立完成从需求到实现的全流程
```

**周四-周五**: 高级实验
```
🧪 lab11-state-machine.md            # 状态机设计
🧪 lab12-subroutine.md               # Subroutine记录
🧪 lab13-data-logging.md             # 数据记录系统

✅ 检查点: 掌握高级开发技巧
```

**周末**: 复习和准备
```
📖 复习前6周内容
📖 阅读 Part 9/tutorial05-from-scratch
📝 规划你的迷你IOC项目

✅ 检查点: 准备好独立开发项目
```

#### 第8周: 独立项目

**周一-周五**: 从零搭建
```
🧪 lab15-mini-ioc.md                 # 从零搭建迷你IOC

📚 Part 9/tutorial05-from-scratch/
   ├── 01-planning.md                # 项目规划
   ├── 02-create-app.md              # 创建应用
   ├── 03-driver-impl.md             # 实现驱动
   ├── 04-device-support.md          # 实现设备支持
   ├── 05-database-design.md         # 设计数据库
   └── 06-deployment.md              # 部署运行

项目建议:
- 选项A: 简化版BPM监测（4个通道）
- 选项B: 温度监控系统（8路温度）
- 选项C: 电源监控系统（电压、电流、功率）

✅ 检查点: 完成一个可运行的IOC项目
```

**周末**: 部署和优化
```
📚 Part 13: 部署上线
   ├── 03-cross-compilation.md       # 交叉编译
   ├── 06-first-deployment.md        # 首次部署
   └── 09-maintenance.md             # 维护

🔧 优化你的项目
📝 编写项目文档
🎉 展示和总结

✅ 检查点: 项目能在目标平台运行
```

#### 完成标准
- [ ] 能独立设计IOC架构
- [ ] 能从零实现驱动层
- [ ] 能从零实现设备支持层
- [ ] 能设计完整的数据库
- [ ] 能交叉编译和部署
- [ ] 完成高级实验11-15
- [ ] 完成一个独立项目

**恭喜**: 你已经完全掌握EPICS IOC开发！🎉

---

## 🎓 不同人群的推荐路径

### 👨‍🎓 场景A: 博士生（需要修改BPMIOC）
**目标**: 为研究课题修改和扩展BPMIOC

```
Week 1: 层次1 - 能运行起来
Week 2-3: 层次2前半部分 - 理解架构和驱动层
Week 4: 根据需求修改代码
Week 5-6: 测试和优化
```

**重点文档**:
- Part 3 (架构)
- Part 4 (驱动层)
- Part 8 (实验6-9)
- Part 10 (调试)

### 👨‍💻 场景B: 工程师（需要开发类似系统）
**目标**: 为其他设备开发类似的IOC

```
Week 1-2: 层次1 + 层次2架构部分
Week 3-5: 层次2深入学习
Week 6-8: 层次3独立开发
```

**重点文档**:
- 所有Part 1-6 (全面理解)
- Part 9 (完整教程)
- Part 13 (部署)

### 🎓 场景C: 初学者（学习EPICS开发）
**目标**: 系统学习EPICS IOC开发

```
完整跟随8周计划 (Part 11)
```

**重点文档**:
- Part 11 (8周详细计划)
- 所有实验 (Part 8)
- 参考手册 (Part 15)

### 🔧 场景D: 维护人员（需要维护BPMIOC）
**目标**: 能诊断问题、小幅修改

```
Week 1: 层次1
Week 2: Part 10 (调试)
Week 3: Part 15 (参考手册) + Part 18 (故障排查)
按需: Part 4-6 (深入理解特定部分)
```

**重点文档**:
- Part 10 (调试)
- Part 15 (参考手册)
- Part 18 (FAQ和故障排查)

## 📊 学习时间估算

### 快速模式（最小时间）
```
层次1: 1周 (每天2-3小时)
总计: 15-20小时
适合: 只需要运行和使用
```

### 标准模式（推荐）
```
层次1: 1-2周 (每天2小时)
层次2: 4-5周 (每天2-3小时)
层次3: 2周 (每天3-4小时)
总计: 7-9周，100-150小时
适合: 系统学习，能独立开发
```

### 深度模式（完全掌握）
```
所有内容: 12-16周
+ 进阶主题 (Part 12)
+ 案例研究 (Part 14)
+ 物理背景 (Part 17)
总计: 200-300小时
适合: 专业开发者，技术专家
```

## 🔄 学习循环

每周的学习循环：

```
周一-周三: 理论学习 📚
   ├── 阅读文档
   ├── 理解概念
   └── 画图总结

周四-周五: 动手实践 🧪
   ├── 完成实验
   ├── 修改代码
   └── 调试问题

周末: 复习巩固 📝
   ├── 回顾本周内容
   ├── 整理笔记
   ├── 思考问题
   └── 规划下周
```

## 📈 进度追踪

使用进度追踪表记录学习进展：

```markdown
# 我的学习进度

## 层次1: 基础复现
- [x] Week 1: 环境搭建 (2025-11-01)
- [x] EPICS基础学习 (2025-11-08)
- [ ] 基础实验1-5
  - [x] lab01
  - [x] lab02
  - [ ] lab03
  - [ ] lab04
  - [ ] lab05

## 层次2: 功能复现
- [ ] Week 2: 架构理解
- [ ] Week 3-4: 驱动层
...
```

完整模板见: [Part 11/10-progress-tracker.md](./part11-weekly-plan/10-progress-tracker.md)

## 💡 学习建议

### ✅ 推荐做法
1. **循序渐进**: 不要跳步骤
2. **动手实践**: 看完就做实验
3. **记录笔记**: 记录问题和解决方案
4. **画图理解**: 架构图、流程图、时序图
5. **定期复习**: 每周末复习本周内容
6. **提出问题**: 在代码注释中记录疑问

### ❌ 避免陷阱
1. ❌ 只看文档不动手
2. ❌ 跳过基础直接看高级
3. ❌ 遇到问题就放弃
4. ❌ 不做实验只看代码
5. ❌ 一次想理解所有内容
6. ❌ 不记笔记靠记忆

## 🎯 里程碑

### 🥉 青铜级（层次1完成）
- ✅ IOC能稳定运行
- ✅ 能用CA工具访问PV
- ✅ 理解基本概念
- 📜 **证书**: 你可以运行和使用BPMIOC了！

### 🥈 白银级（层次2完成）
- ✅ 理解三层架构
- ✅ 能修改和扩展功能
- ✅ 能调试和解决问题
- 📜 **证书**: 你可以维护和开发BPMIOC了！

### 🥇 黄金级（层次3完成）
- ✅ 能独立设计架构
- ✅ 能从零开发IOC
- ✅ 能部署到真实硬件
- 📜 **证书**: 你是EPICS IOC开发专家了！

## 🔗 快速链接

- 📖 [总文档索引](./README.md)
- ⚡ [快速开始](./QUICK_START.md)
- 📅 [8周详细计划](./part11-weekly-plan/)
- 🧪 [所有实验](./part8-hands-on-labs/)
- 📚 [所有教程](./part9-tutorials/)
- 📕 [参考手册](./part15-reference/)
- ❓ [FAQ](./part18-appendix/faq.md)

## 📞 获取帮助

- 💬 GitHub Discussions
- 📧 Email: your-email@domain.com
- 🐛 Issue Tracker: GitHub Issues

---

**现在就开始你的学习之旅吧！** 🚀

建议从 [QUICK_START.md](./QUICK_START.md) 开始，30分钟后你就能看到IOC运行起来！
