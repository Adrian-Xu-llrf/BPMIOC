# Part 11.1: 学习路径可视化

> **用途**: 可视化展示8周学习路径
> **阅读时间**: 10分钟
> **使用场景**: 了解整体学习结构，规划学习路线

## 🗺️ 完整学习地图

```
┌─────────────────────────────────────────────────────────────┐
│                    BPMIOC 8周学习之旅                       │
│                                                               │
│  起点: 零基础    ──────────────────→    终点: 独立开发       │
└─────────────────────────────────────────────────────────────┘

Week 1 ┌──────────────────────┐
  🏁   │  环境搭建 + 快速复现  │
       │                      │
       │  - EPICS Base安装    │  ← 目标: 运行起来
       │  - BPMIOC编译        │
       │  - 模拟模式测试      │
       └──────────┬───────────┘
                  │
                  ↓
Week 2 ┌──────────────────────┐
  📚   │  EPICS基础知识       │
       │                      │
       │  - PV/Record概念     │  ← 目标: 理解基础
       │  - CA工具使用        │
       │  - Lab 1-3           │
       └──────────┬───────────┘
                  │
    ========== 层次1检查点 ==========
                  │
                  ↓
Week 3 ┌──────────────────────┐
  🔧   │  驱动层理解          │
       │                      │
       │  - driverWrapper.c   │  ← 目标: 追踪数据流
       │  - dlopen机制        │
       │  - Lab 4             │
       └──────────┬───────────┘
                  │
                  ↓
Week 4 ┌──────────────────────┐
  🛠️   │  驱动层修改实践      │
       │                      │
       │  - 添加新offset      │  ← 目标: 能修改代码
       │  - 添加新PV          │
       │  - Lab 6-7           │
       └──────────┬───────────┘
                  │
    ========== 层次2检查点(1/2) =====
                  │
                  ↓
Week 5 ┌──────────────────────┐
  🎯   │  设备支持层          │
       │                      │
       │  - devBPMMonitor.c   │  ← 目标: 理解DSET
       │  - DSET机制          │
       │  - Lab 8             │
       └──────────┬───────────┘
                  │
                  ↓
Week 6 ┌──────────────────────┐
  📊   │  数据库进阶          │
       │                      │
       │  - .db文件设计       │  ← 目标: 设计PV
       │  - Record配置        │
       │  - Lab 9-10          │
       └──────────┬───────────┘
                  │
    ========== 层次2检查点(2/2) =====
                  │
                  ↓
Week 7 ┌──────────────────────┐
  ⚡   │  综合开发            │
       │                      │
       │  - Mock库开发        │  ← 目标: 完整功能开发
       │  - 完整功能实现      │
       │  - Lab 11-13         │
       └──────────┬───────────┘
                  │
                  ↓
Week 8 ┌──────────────────────┐
  🚀   │  独立项目            │
       │                      │
       │  - 从零设计IOC       │  ← 目标: 独立完成项目
       │  - 实现和测试        │
       │  - 文档和交付        │
       └──────────┬───────────┘
                  │
    ========== 层次3检查点 ==========
                  │
                  ↓
              🎓 毕业！
    能够独立开发EPICS IOC
```

---

## 📊 知识体系树

```
BPMIOC知识体系
├─ 📦 基础层 (Week 1-2)
│  ├─ EPICS环境
│  │  ├─ EPICS Base安装
│  │  ├─ BPMIOC编译
│  │  └─ 模拟模式配置
│  │
│  ├─ EPICS概念
│  │  ├─ IOC (Input/Output Controller)
│  │  ├─ PV (Process Variable)
│  │  ├─ Record (数据记录)
│  │  ├─ CA (Channel Access)
│  │  └─ 扫描机制
│  │
│  └─ 基本工具
│     ├─ caget/caput/camonitor
│     ├─ Python pyepics
│     └─ CSS/EDM监控

├─ 🏗️ 架构层 (Week 3-4)
│  ├─ 三层架构
│  │  ├─ 数据库层 (.db files)
│  │  ├─ 设备支持层 (devBPMMonitor.c)
│  │  └─ 驱动层 (driverWrapper.c)
│  │
│  ├─ 数据流
│  │  ├─ 硬件 → 驱动层 → 设备支持 → Record → PV
│  │  ├─ I/O中断扫描
│  │  └─ CP链接传播
│  │
│  ├─ 初始化
│  │  ├─ iocInit()序列
│  │  ├─ 驱动初始化
│  │  └─ Record初始化
│  │
│  └─ 关键机制
│     ├─ dlopen/dlsym (动态库加载)
│     ├─ pthread (数据采集线程)
│     ├─ scanIoRequest (I/O中断)
│     └─ Offset系统

├─ 🔧 实现层 (Week 5-6)
│  ├─ 驱动层实现
│  │  ├─ InitDevice()
│  │  ├─ ReadData()
│  │  ├─ SetReg()
│  │  ├─ ReadWaveform()
│  │  └─ 全局缓冲区
│  │
│  ├─ 设备支持层实现
│  │  ├─ DSET结构
│  │  ├─ init_record()
│  │  ├─ read_ai()/write_ao()
│  │  └─ DevPvt私有数据
│  │
│  └─ 数据库层实现
│     ├─ ai/ao/waveform/longin等Record
│     ├─ INP/OUT字段语法
│     ├─ SCAN扫描配置
│     └─ 链接(CP/PP)

└─ 🚀 开发层 (Week 7-8)
   ├─ Mock库开发
   │  ├─ 硬件模拟器设计
   │  ├─ 数据生成算法
   │  └─ 与IOC集成
   │
   ├─ 完整开发流程
   │  ├─ 需求分析
   │  ├─ 架构设计
   │  ├─ 代码实现
   │  ├─ 测试验证
   │  └─ 文档编写
   │
   └─ 部署
      ├─ 交叉编译
      ├─ 硬件部署
      └─ 调试优化
```

---

## 🎯 三条学习路径

### 路径A: 最小学习路径（快速入门）

**时长**: 2周
**目标**: 能运行、能用、理解基本概念
**适合**: 时间紧张的学习者

```
Week 1         Week 2
  ↓             ↓
环境搭建  →  EPICS基础  →  Lab 1-3
  ↓             ↓             ↓
安装       →  理解概念  →  基础实验
```

**学习内容**:
- ✅ Part 1: 快速复现
- ✅ Part 2: EPICS基础（精读前5个文档）
- ✅ Part 8: Lab 1-3

**完成后能力**:
- 运行BPMIOC
- 访问PV
- 理解基本概念

---

### 路径B: 标准学习路径（系统学习）

**时长**: 6周
**目标**: 理解架构、能修改、能添加功能
**适合**: 大多数学习者（推荐）

```
Week 1-2      Week 3-4       Week 5-6
   ↓             ↓              ↓
 基础层    →  架构层     →   实现层
   ↓             ↓              ↓
 概念理解   →  数据流追踪  →  代码修改
```

**学习内容**:
- ✅ Part 1-2: 基础
- ✅ Part 3-4: 驱动层
- ✅ Part 5-6: 设备支持和数据库
- ✅ Part 8: Lab 1-10

**完成后能力**:
- 理解三层架构
- 追踪数据流
- 添加新PV和功能

---

### 路径C: 完整学习路径（深入掌握）

**时长**: 8周
**目标**: 独立开发、从零搭建
**适合**: 准备开发自己IOC的学习者

```
Week 1-2    Week 3-4    Week 5-6    Week 7-8
   ↓          ↓           ↓           ↓
 基础层   →  架构层   →  实现层   →  开发层
   ↓          ↓           ↓           ↓
 概念      →  机制     →  代码     →  项目
```

**学习内容**:
- ✅ Part 1-7: 全部核心内容
- ✅ Part 8: 全部15个实验
- ✅ Part 9: 完整教程
- ✅ Part 19: Mock库开发

**完成后能力**:
- 独立设计IOC架构
- 从零实现IOC
- 部署到真实硬件

---

## 📈 技能成长曲线

```
技能
水平
 ↑
100%│                                             ┌─────── 独立开发
    │                                        ┌────┘
 80%│                                   ┌────┘    Week 7-8
    │                              ┌────┘          综合开发
 60%│                         ┌────┘
    │                    ┌────┘     Week 5-6
 40%│               ┌────┘           设备支持      能修改
    │          ┌────┘     Week 3-4                功能
 20%│     ┌────┘           驱动层
    │┌────┘     Week 1-2
  0%│            基础层                             能运行
    └───────────────────────────────────────────────────→
     0    2    4    6    8   10   12   14   16   周数


关键转折点:
  ● Week 2: 从"不会"到"能用"
  ● Week 4: 从"能用"到"理解"
  ● Week 6: 从"理解"到"能改"
  ● Week 8: 从"能改"到"能造"
```

---

## 🧩 知识模块依赖关系

```
                    ┌──────────────┐
                    │  独立项目    │ Week 8
                    │  (Part 9)    │
                    └──────┬───────┘
                           │
              ┌────────────┴────────────┐
              ↓                         ↓
       ┌──────────┐              ┌──────────┐
       │  Mock库  │ Week 7       │ 综合开发 │ Week 7
       │(Part 19) │              │(Part 8)  │
       └─────┬────┘              └────┬─────┘
             │                        │
         ┌───┴───┬────────────────────┴───┬────────┐
         ↓       ↓                        ↓        ↓
    ┌────────┐ ┌────────┐          ┌────────┐ ┌────────┐
    │ 驱动层 │ │ 设备层 │ Week 5-6 │ 数据库 │ │ 构建   │
    │(Part 4)│ │(Part 5)│          │(Part 6)│ │(Part 7)│
    └────┬───┘ └────┬───┘          └────┬───┘ └────┬───┘
         │          │                   │          │
         └──────────┴──────────┬────────┴──────────┘
                               ↓
                        ┌──────────┐
                        │ 架构理解 │ Week 3-4
                        │ (Part 3) │
                        └─────┬────┘
                              ↓
                    ┌──────────────┐
                    │ EPICS基础    │ Week 1-2
                    │ (Part 1-2)   │
                    └──────────────┘

依赖规则:
  → 必须先学习
  ⇒ 建议先学习
  ⟿ 可以并行学习
```

---

## 🎓 学习阶段转换

### 阶段1: 新手 → 入门 (Week 1-2)

**起点**: 不了解EPICS
**终点**: 能运行IOC，理解基本概念

**转换标志**:
```
❓ 什么是IOC？
   ↓ [学习]
✅ IOC是Input/Output Controller，用于连接硬件和客户端

❓ 如何访问PV？
   ↓ [学习]
✅ 使用caget/caput工具或Python pyepics库
```

---

### 阶段2: 入门 → 理解 (Week 3-4)

**起点**: 会用工具，但不理解原理
**终点**: 理解架构，能追踪数据流

**转换标志**:
```
❓ PV的值从哪里来？
   ↓ [学习]
✅ 硬件 → GetRFInfo() → ReadData() → read_ai() → Record → PV

❓ 如何实现自动更新？
   ↓ [学习]
✅ pthread线程 → TriggerAllDataReached() → scanIoRequest() → 扫描
```

---

### 阶段3: 理解 → 修改 (Week 5-6)

**起点**: 理解原理，但不会改代码
**终点**: 能添加新功能

**转换标志**:
```
❓ 如何添加一个新的PV？
   ↓ [学习]
✅ 1. 驱动层添加offset
   2. 设备支持添加解析
   3. 数据库添加record
   4. 编译测试

❓ 如何修改数据格式？
   ↓ [学习]
✅ 在ReadData()函数中修改返回值计算逻辑
```

---

### 阶段4: 修改 → 创造 (Week 7-8)

**起点**: 能改现有代码
**终点**: 能从零创建新IOC

**转换标志**:
```
❓ 如何开发新的IOC项目？
   ↓ [学习]
✅ 1. 需求分析
   2. 架构设计（三层）
   3. Mock库实现
   4. 驱动层实现
   5. 设备支持实现
   6. 数据库设计
   7. 测试和部署

❓ 如何在PC上开发？
   ↓ [学习]
✅ 开发Mock库模拟硬件，
   使用dlopen动态加载Mock/Real库
```

---

## 📅 时间线视图

### 8周时间线

```
月   Week 1   Week 2   Week 3   Week 4   Week 5   Week 6   Week 7   Week 8
    │━━━━━━│━━━━━━│━━━━━━│━━━━━━│━━━━━━│━━━━━━│━━━━━━│━━━━━━│
    │      │      │      │      │      │      │      │      │
1月 │ 环境  │EPICS │      │      │      │      │      │      │
    │ 搭建  │基础  │      │      │      │      │      │      │
    │      │      │      │      │      │      │      │      │
2月 │      │      │驱动层│驱动层│设备  │数据库│      │      │
    │      │      │理解  │修改  │支持  │进阶  │      │      │
    │      │      │      │      │      │      │      │      │
3月 │      │      │      │      │      │      │综合  │独立  │
    │      │      │      │      │      │      │开发  │项目  │
    └──────┴──────┴──────┴──────┴──────┴──────┴──────┴──────┘

里程碑:
 📍 Week 2: 能运行IOC
 📍 Week 4: 能修改驱动层
 📍 Week 6: 能设计PV
 📍 Week 8: 能独立开发
```

---

## 🔄 迭代学习模型

BPMIOC学习采用螺旋式上升模型：

```
        第1圈: 基础认知 (Week 1-2)
              ○
             ↗ ↘
            ○   ○  了解概念、会用工具
             ↖ ↙
              ○

        第2圈: 深入理解 (Week 3-4)
            ○
           ↗ ↘
          ○   ○  理解原理、追踪流程
           ↖ ↙
            ○

        第3圈: 实践修改 (Week 5-6)
          ○
         ↗ ↘
        ○   ○  修改代码、添加功能
         ↖ ↙
          ○

        第4圈: 独立创造 (Week 7-8)
        ○
       ↗ ↘
      ○   ○  设计开发、独立项目
       ↖ ↙
        ○

每一圈都:
  1. 回顾上一圈的内容（复习）
  2. 学习新的内容（扩展）
  3. 深化理解（深入）
  4. 实践验证（巩固）
```

---

## 🎯 选择你的路径

### 我应该选择哪条路径？

**选择路径A**（2周）如果你:
- ⏰ 时间非常紧张
- 🎯 只需要能运行和使用BPMIOC
- 📚 不需要深入理解或修改代码

**选择路径B**（6周）如果你:
- ⏰ 有充足的时间（每周15-20小时）
- 🎯 需要理解架构并能修改代码
- 📚 希望系统学习EPICS IOC

**选择路径C**（8周）如果你:
- ⏰ 时间充裕，愿意投入
- 🎯 准备独立开发自己的IOC
- 📚 希望完全掌握EPICS IOC开发

---

## 📝 下一步

1. **评估时间**: 确认每周能投入多少小时
2. **选择路径**: 根据目标选择A/B/C
3. **准备环境**: 确保有Linux系统
4. **开始学习**: 从Week 1开始

---

## 🔗 相关文档

- [00-overview.md](./00-overview.md) - 学习计划总览
- [02-week1.md](./02-week1.md) - Week 1详细计划
- [10-progress-tracker.md](./10-progress-tracker.md) - 进度追踪

---

**准备好了吗？**

👉 开始 Week 1: [02-week1.md](./02-week1.md)

或返回: [00-overview.md](./00-overview.md)

---

祝你学习顺利！🚀
