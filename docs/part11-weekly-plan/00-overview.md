# Part 11.0: 8周学习计划总览

> **总时长**: 8周，每周15-20小时
> **适合人群**: 博士研究生、EPICS初学者
> **最终目标**: 从零基础到独立开发EPICS IOC

## 🎯 学习目标

完成这个8周计划后，你将能够：

✅ **理论层面**
- 完全理解EPICS IOC的三层架构
- 掌握BPMIOC的所有核心机制
- 理解驱动层、设备支持层、数据库层的设计原理

✅ **实践层面**
- 独立搭建EPICS开发环境
- 能在PC上进行90%的开发工作（使用Mock库）
- 能添加新功能、修改现有功能
- 能调试和解决常见问题

✅ **开发能力**
- 从零开始设计一个IOC项目
- 实现硬件抽象层和设备支持
- 设计PV结构和数据库
- 交叉编译并部署到目标板

---

## 📅 8周路线图

```
Week 1  ┌──────────────────────────┐
        │  环境搭建 + 快速复现      │ → 能运行BPMIOC，看到PV
        └──────────────────────────┘
              ↓
Week 2  ┌──────────────────────────┐
        │  EPICS基础 + 基础实验     │ → 理解Record、PV、CA
        └──────────────────────────┘
              ↓
Week 3  ┌──────────────────────────┐
        │  驱动层理解               │ → 理解driverWrapper.c
        └──────────────────────────┘
              ↓
Week 4  ┌──────────────────────────┐
        │  驱动层修改实践           │ → 添加新PV、修改功能
        └──────────────────────────┘
              ↓
Week 5  ┌──────────────────────────┐
        │  设备支持层               │ → 理解devBPMMonitor.c
        └──────────────────────────┘
              ↓
Week 6  ┌──────────────────────────┐
        │  数据库进阶               │ → 设计PV、记录配置
        └──────────────────────────┘
              ↓
Week 7  ┌──────────────────────────┐
        │  综合开发                 │ → 完整功能开发
        └──────────────────────────┘
              ↓
Week 8  ┌──────────────────────────┐
        │  独立项目                 │ → 从零搭建新IOC
        └──────────────────────────┘
```

---

## 📊 三个学习层次

### 层次1: 基础复现（Week 1-2）

**目标**: 能运行IOC，访问PV，理解基本概念

**完成标准**:
- ✅ BPMIOC在PC上运行（模拟模式）
- ✅ 能用`caget`/`caput`访问PV
- ✅ 理解PV、Record、IOC、CA等概念
- ✅ 能用Python读写PV
- ✅ 完成Lab 1-3（基础实验）

**时间投入**: 30-40小时（每周15-20小时）

**适合人群**: 所有学习者

---

### 层次2: 功能复现（Week 3-6）

**目标**: 理解三层架构，能修改代码，添加简单功能

**完成标准**:
- ✅ 理解驱动层、设备支持层、数据库层
- ✅ 能追踪数据流（从硬件到PV）
- ✅ 能在驱动层添加新功能
- ✅ 能添加新的PV和Record
- ✅ 能使用Mock库在PC上开发
- ✅ 完成Lab 6-10（修改实验）

**时间投入**: 60-80小时（每周15-20小时）

**适合人群**: 希望深入理解并能修改BPMIOC的学习者

---

### 层次3: 完整复现（Week 7-8）

**目标**: 从零搭建类似项目，部署到真实硬件

**完成标准**:
- ✅ 能独立设计IOC架构
- ✅ 能编写硬件模拟器
- ✅ 能实现驱动层和设备支持层
- ✅ 能设计PV结构
- ✅ 能交叉编译并部署
- ✅ 完成1个完整的独立项目

**时间投入**: 30-40小时（每周15-20小时）

**适合人群**: 准备开发自己IOC项目的学习者

---

## ⏰ 每周时间分配

### 工作日 (周一至周五)

**每天 2-3 小时**:
```
17:00-17:30  复习昨天内容
17:30-18:30  理论学习（阅读文档）
18:30-19:30  动手实践（实验或编码）
19:30-20:00  记录笔记和问题
```

**时间分配**:
- 📚 理论学习: 60%（阅读文档、理解概念）
- 🧪 动手实践: 30%（实验、编码）
- 🔍 问题排查: 10%（调试、解决问题）

---

### 周末 (周六和周日)

**每天 3-4 小时**:
```
Saturday:
  09:00-10:00  复习本周内容
  10:00-12:00  完成实验项目
  14:00-16:00  深入理解难点

Sunday:
  09:00-11:00  完成剩余实验
  11:00-12:00  整理笔记
  14:00-15:00  规划下周学习
  15:00-16:00  阅读扩展资料
```

**时间分配**:
- 📚 理论学习: 30%（深入难点）
- 🧪 动手实践: 50%（完成实验）
- 📝 复习总结: 20%（笔记、规划）

---

## 📈 进度里程碑

### Week 2 里程碑（第1次检查）

**能力指标**:
- [ ] IOC能稳定运行30分钟以上
- [ ] 能用CA工具访问所有RF和XY的PV
- [ ] 理解什么是Record、PV、IOC
- [ ] 完成Lab 1-3

**自我检测**:
```bash
# 测试1: 运行IOC
cd ~/BPMIOC/iocBoot/iocBPMMonitor
./st.cmd

# 测试2: 访问PV
caget BPM:01:RF3:Amp
camonitor BPM:01:XY1:X

# 测试3: Python访问
python3 -c "from epics import caget; print(caget('BPM:01:RF3:Amp'))"
```

---

### Week 4 里程碑（第2次检查）

**能力指标**:
- [ ] 能追踪RF3:Amp从硬件到PV的完整路径
- [ ] 能在driverWrapper.c中添加printf调试
- [ ] 能在驱动层添加一个新的offset
- [ ] 理解dlopen和pthread的作用
- [ ] 完成Lab 6-7

**自我检测**:
```c
// 测试1: 能回答以下问题
Q: BPM:01:RF3:Amp的值从哪里来？
A: GetRFInfo(3, 0) → ReadData() → ai record → PV

// 测试2: 能修改代码添加调试
printf("DEBUG: channel=%d, value=%.3f\n", channel, value);

// 测试3: 能添加新功能
// 添加一个新的offset: OFFSET_RF_POWER
```

---

### Week 6 里程碑（第3次检查）

**能力指标**:
- [ ] 理解DSET结构和作用
- [ ] 能添加新的Record类型
- [ ] 能设计并实现新的PV
- [ ] 理解INP/OUT字段的语法
- [ ] 完成Lab 8-10

**自我检测**:
```c
// 测试1: 能解释DSET
struct {
    long number;
    DEVSUPFUN init_record;  // 这个函数做什么？
    DEVSUPFUN read;         // 何时调用？
} devAi;

// 测试2: 能添加新PV
record(ai, "BPM:01:RF3:Power") {
    field(DTYP, "BPM Monitor")
    field(INP,  "@0 3 5")  // 这个语法是什么意思？
    field(SCAN, "I/O Intr")
}
```

---

### Week 8 里程碑（最终检查）

**能力指标**:
- [ ] 独立完成一个简单IOC项目（例如温度监控）
- [ ] 实现Mock库和驱动层
- [ ] 实现设备支持和数据库
- [ ] 能编译运行并测试
- [ ] 代码符合规范，有注释

**项目要求**:
```
目标: 开发一个温度监控IOC
功能:
  - 监控4个温度传感器
  - 支持温度上下限报警
  - 支持历史数据记录
  - 支持PC模拟（Mock库）

交付物:
  1. 源代码（driver + device support + database）
  2. Mock库实现
  3. README文档
  4. 测试脚本
```

---

## 📚 每周学习结构

### 周一-周三: 理论学习 📚

**活动**:
- 📖 阅读Part文档（60-90分钟/天）
- 🎨 绘制架构图和流程图（30分钟）
- 📝 整理学习笔记（30分钟）
- ❓ 记录疑问和思考（15分钟）

**目标**:
- 理解本周的核心概念
- 掌握关键机制的原理
- 建立系统性知识框架

---

### 周四-周五: 动手实践 🧪

**活动**:
- 🧪 完成实验项目（90-120分钟/天）
- 💻 修改和调试代码（60分钟）
- 🔍 验证功能和测试（30分钟）

**目标**:
- 将理论应用到实践
- 通过实验加深理解
- 发现和解决问题

---

### 周末: 复习巩固 📝

**活动**:
- 📊 回顾本周学习内容（60分钟）
- 📝 整理知识点和笔记（60分钟）
- 💭 思考和总结问题（30分钟）
- 📅 规划下周学习（30分钟）

**目标**:
- 巩固本周学到的知识
- 查漏补缺
- 为下周做准备

---

## ✅ 学习方法建议

### 推荐做法 ✅

1. **按顺序学习**: 不要跳过任何一周
   - 每周的内容都建立在前面的基础上
   - 跳过会导致后面理解困难

2. **边学边做**: 看完文档立即实践
   - 理论和实践结合效果最好
   - 不要只看不做

3. **记录笔记**: 用自己的话总结
   - 记录理解和疑问
   - 画图帮助理解

4. **画图理解**: 多画架构图和流程图
   - 数据流图
   - 函数调用图
   - 时序图

5. **定期复习**: 周末复习本周内容
   - 巩固知识
   - 查漏补缺

6. **提出问题**: 在代码注释中记录疑问
   - 带着问题学习
   - 寻找答案并验证

---

### 避免陷阱 ❌

1. **只看不做**: 光看文档不动手
   - 看懂≠会用
   - 必须通过实践才能真正掌握

2. **跳过基础**: 急于进入高级内容
   - 基础不牢，地动山摇
   - 返工会浪费更多时间

3. **遇问题就放弃**: 一遇到困难就停止
   - 问题是学习的最好机会
   - 解决问题后会理解更深

4. **不做实验**: 只看文档不做Lab
   - 实验是验证理解的最好方式
   - 动手才能发现问题

5. **一次理解所有**: 期望一遍就懂
   - 复杂概念需要多次学习
   - 螺旋式上升是正常的

6. **不做笔记**: 依赖记忆
   - 好记性不如烂笔头
   - 笔记是复习的最好材料

---

## 📋 使用本学习计划

### 准备阶段

1. **阅读本文档**: 理解整体规划
2. **评估时间**: 确保每周能投入15-20小时
3. **准备环境**: 安装Linux系统（虚拟机或双系统）
4. **下载源码**: clone BPMIOC仓库
5. **打印进度表**: 打印[进度追踪表](./10-progress-tracker.md)

---

### 执行阶段

1. **每周开始时**:
   - 阅读本周的周计划（如[02-week1.md](./02-week1.md)）
   - 了解本周目标和任务
   - 规划每天的学习时间

2. **每天学习时**:
   - 按照周计划的Daily Schedule执行
   - 完成理论学习和实践任务
   - 记录进度和问题

3. **每周结束时**:
   - 完成本周的检查点测试
   - 更新进度追踪表
   - 回顾和总结

---

### 调整策略

**如果进度超前**:
- ✅ 深入学习扩展内容
- ✅ 提前预习下周内容
- ✅ 完成更多实验

**如果进度落后**:
- 🔍 分析原因（时间不足？理解困难？）
- 🎯 调整学习方法
- ⏰ 适当延长1-2天
- ❓ 寻求帮助或查阅更多资料

**如果遇到困难**:
- 📖 重新阅读Part 2基础文档
- 🔍 查看Lab中的常见问题
- 💭 休息后重新思考
- 🗣️ 与同学讨论

---

## 🎓 评估标准

### 层次1评估（Week 2结束）

**通过标准**:
- IOC能运行
- 能访问PV
- 完成Lab 1-3

**如果未通过**: 延长Week 2，重点突破

---

### 层次2评估（Week 6结束）

**通过标准**:
- 理解三层架构
- 能追踪数据流
- 能添加新PV
- 完成Lab 6-10

**如果未通过**:
- 复习Part 3-6
- 重做实验
- 寻求帮助

---

### 层次3评估（Week 8结束）

**通过标准**:
- 独立完成项目
- 代码质量合格
- 功能正常运行

**如果未通过**:
- 延长Week 8
- 简化项目需求
- 分模块完成

---

## 📊 学习路径可视化

详见 [01-learning-path.md](./01-learning-path.md)

---

## 📅 每日计划模板

详见 [11-daily-schedule-template.md](./11-daily-schedule-template.md)

---

## 🔗 相关文档

| 文档 | 用途 |
|------|------|
| [README.md](./README.md) | Part 11索引 |
| [02-week1.md](./02-week1.md) | Week 1详细计划 |
| [10-progress-tracker.md](./10-progress-tracker.md) | 进度追踪表 |

---

## 💡 最后的建议

**给初学者**:
- 不要被8周吓到，一步一步来
- 理解比速度更重要
- 遇到问题很正常，坚持下去

**给有基础的学习者**:
- 可以加快前2周的进度
- 但不要跳过实验
- 重点理解设计思想

**给准备开发的学习者**:
- 8周是基础，真正掌握需要持续实践
- 多思考"为什么这样设计"
- 尝试自己设计新的IOC

---

**准备好了吗？**

👉 开始你的8周学习之旅: [02-week1.md](./02-week1.md)

或者先了解: [01-learning-path.md](./01-learning-path.md)

---

**祝你学习顺利！** 🚀

记住：
> "慢即是快，少即是多。专注于理解，而不是完成进度。"
