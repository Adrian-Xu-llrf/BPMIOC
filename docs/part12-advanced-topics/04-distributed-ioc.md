# åˆ†å¸ƒå¼IOC

> **ç›®æ ‡**: æž„å»ºåˆ†å¸ƒå¼æŽ§åˆ¶ç³»ç»Ÿ
> **éš¾åº¦**: â­â­â­â­â­
> **é¢„è®¡æ—¶é—´**: 1å‘¨

## åˆ†å¸ƒå¼æž¶æž„

### å…¸åž‹æž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IOC 1     â”‚     â”‚   IOC 2     â”‚     â”‚   IOC 3     â”‚
â”‚  (BPM 1-4)  â”‚     â”‚  (BPM 5-8)  â”‚     â”‚  (BPM 9-12) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚   Gateway   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚                   â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
          â”‚  Operator   â”‚     â”‚  Archiver  â”‚
          â”‚  Station    â”‚     â”‚            â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## CA Gatewayé…ç½®

### å®‰è£…Gateway

```bash
# ä¸‹è½½CA Gateway
git clone https://github.com/epics-extensions/ca-gateway.git
cd ca-gateway
make

# é…ç½®accessæƒé™
cat > gateway.access <<EOF
EVALUATION ORDER DENY, ALLOW

# å…è®¸æ‰€æœ‰ä¸»æœºè¯»å–
.*  ALLOW

# åªå…è®¸ç‰¹å®šä¸»æœºå†™å…¥
.* HOST(192.168.1.*)  ALLOW
EOF

# é…ç½®PVåˆ—è¡¨
cat > gateway.pvlist <<EOF
EVALUATION ORDER DENY, ALLOW

# åªè½¬å‘LLRFå¼€å¤´çš„PV
LLRF:.*  ALLOW
EOF

# å¯åŠ¨Gateway
./bin/linux-x86_64/gateway -access gateway.access \
                           -pvlist gateway.pvlist \
                           -sip 192.168.1.100:5064 \
                           -cip 192.168.2.100:5064
```

## IOCé—´é€šä¿¡

### ä½¿ç”¨DBé“¾æŽ¥

```
# IOC1ä¸Šçš„Record
record(ai, "IOC1:Value") {
    field(VAL, "100")
}

# IOC2ä¸Šçš„Record - è¯»å–IOC1çš„å€¼
record(ai, "IOC2:FromIOC1") {
    field(INP, "IOC1:Value CP")  # CAé“¾æŽ¥
}
```

## è´Ÿè½½å‡è¡¡

### å¤šIOCåˆ†æ‹…è´Ÿè½½

```bash
# å¯åŠ¨å¤šä¸ªIOCå®žä¾‹
./iocBoot/iocBPM1/st.cmd &
./iocBoot/iocBPM2/st.cmd &
./iocBoot/iocBPM3/st.cmd &
```

## ðŸ”— ç›¸å…³æ–‡æ¡£

- [Part 13: éƒ¨ç½²ä¸Šçº¿](../part13-deployment/)
