# BPM IOC æµ‹è¯•æ¡†æ¶ (Testbench)

å®Œæ•´çš„æµ‹è¯•æ¡†æ¶ï¼Œç”¨äºå¿«é€ŸéªŒè¯BPMç›‘æ§ç³»ç»Ÿçš„åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
- [æµ‹è¯•ç»„ä»¶](#æµ‹è¯•ç»„ä»¶)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [æ·»åŠ æ–°æµ‹è¯•](#æ·»åŠ æ–°æµ‹è¯•)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ¦‚è¿°

BPM IOC Testbench æ˜¯ä¸€ä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–æµ‹è¯•ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š

- **Mock ç¡¬ä»¶é©±åŠ¨**ï¼šæ¨¡æ‹ŸçœŸå®ç¡¬ä»¶æ¥å£ï¼Œæ— éœ€ç‰©ç†è®¾å¤‡å³å¯æµ‹è¯•
- **å•å…ƒæµ‹è¯•æ¡†æ¶**ï¼šè½»é‡çº§æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒå„ç§æ–­è¨€å’Œæµ‹è¯•ç®¡ç†
- **æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨**ï¼šç”Ÿæˆå„ç§æµ‹è¯•åœºæ™¯æ‰€éœ€çš„æ³¢å½¢å’Œå‚æ•°æ•°æ®
- **è‡ªåŠ¨åŒ–è„šæœ¬**ï¼šä¸€é”®è¿è¡Œæ‰€æœ‰æµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Š

### ä¸»è¦ç‰¹æ€§

âœ… æ— éœ€ç¡¬ä»¶å³å¯è¿è¡Œå®Œæ•´æµ‹è¯•
âœ… æ¨¡æ‹ŸçœŸå®çš„RFä¿¡å·ã€BPMä½ç½®ã€æ—¶é—´æˆ³ç­‰
âœ… è‡ªåŠ¨åŒ–æµ‹è¯•è¿è¡Œå’ŒæŠ¥å‘Šç”Ÿæˆ
âœ… æ˜“äºæ‰©å±•å’Œæ·»åŠ æ–°æµ‹è¯•
âœ… å½©è‰²è¾“å‡ºï¼Œæ¸…æ™°çš„æµ‹è¯•ç»“æœæ˜¾ç¤º

---

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- GCC ç¼–è¯‘å™¨
- Make æ„å»ºå·¥å…·
- æ ‡å‡† C åº“ï¼ˆmath, pthreadï¼‰

### ä¸€é”®è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
cd testbench
./scripts/run_tests.sh
```

è¿™å°†ï¼š
1. æ¸…ç†ä¹‹å‰çš„æ„å»º
2. ç¼–è¯‘ mock é©±åŠ¨åº“
3. ç¼–è¯‘å•å…ƒæµ‹è¯•
4. ç¼–è¯‘æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨
5. è¿è¡Œæ‰€æœ‰æµ‹è¯•
6. ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

### å¿«é€Ÿæµ‹è¯•ï¼ˆè·³è¿‡æ„å»ºï¼‰

å¦‚æœå·²ç»æ„å»ºè¿‡ï¼Œå¯ä»¥å¿«é€Ÿè¿è¡Œæµ‹è¯•ï¼š

```bash
cd testbench
make quick-test
```

---

## ç›®å½•ç»“æ„

```
testbench/
â”œâ”€â”€ README.md                    # æœ¬æ–‡æ¡£
â”œâ”€â”€ Makefile                     # é¡¶å±‚ Makefile
â”‚
â”œâ”€â”€ mock_driver/                 # Mock ç¡¬ä»¶é©±åŠ¨
â”‚   â”œâ”€â”€ mock_lowlevel.h         # Mock é©±åŠ¨å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ mock_lowlevel.c         # Mock é©±åŠ¨å®ç°
â”‚   â”œâ”€â”€ Makefile                # Mock é©±åŠ¨ç¼–è¯‘
â”‚   â”œâ”€â”€ libmocklowlevel.so      # ç¼–è¯‘ç”Ÿæˆçš„å…±äº«åº“
â”‚   â””â”€â”€ liblowlevel.so          # ç¬¦å·é“¾æ¥ï¼ˆæ›¿ä»£çœŸå®é©±åŠ¨ï¼‰
â”‚
â”œâ”€â”€ unit_tests/                  # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ test_framework.h        # æµ‹è¯•æ¡†æ¶å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ test_waveform.c         # æ³¢å½¢å¤„ç†æµ‹è¯•
â”‚   â”œâ”€â”€ test_mock_driver.c      # Mock é©±åŠ¨æµ‹è¯•
â”‚   â”œâ”€â”€ Makefile                # å•å…ƒæµ‹è¯•ç¼–è¯‘
â”‚   â”œâ”€â”€ test_waveform           # ç¼–è¯‘ç”Ÿæˆçš„æµ‹è¯•ç¨‹åº
â”‚   â””â”€â”€ test_mock_driver        # ç¼–è¯‘ç”Ÿæˆçš„æµ‹è¯•ç¨‹åº
â”‚
â”œâ”€â”€ test_data/                   # æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ generate_test_data.c    # æ•°æ®ç”Ÿæˆå™¨æºç 
â”‚   â”œâ”€â”€ Makefile                # æ•°æ®ç”Ÿæˆå™¨ç¼–è¯‘
â”‚   â”œâ”€â”€ generate_test_data      # ç¼–è¯‘ç”Ÿæˆçš„ç¨‹åº
â”‚   â””â”€â”€ output/                 # ç”Ÿæˆçš„æµ‹è¯•æ•°æ®æ–‡ä»¶
â”‚       â”œâ”€â”€ sine_clean.csv
â”‚       â”œâ”€â”€ sine_noisy.csv
â”‚       â”œâ”€â”€ cavity_pulse.csv
â”‚       â”œâ”€â”€ step_signal.csv
â”‚       â”œâ”€â”€ bpm_positions.csv
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ integration_tests/           # é›†æˆæµ‹è¯•ï¼ˆæœªæ¥æ‰©å±•ï¼‰
â”‚
â”œâ”€â”€ scripts/                     # æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ run_tests.sh            # è‡ªåŠ¨åŒ–æµ‹è¯•è¿è¡Œè„šæœ¬
â”‚
â””â”€â”€ logs/                        # æµ‹è¯•æ—¥å¿—ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    â””â”€â”€ test_report_*.txt       # æµ‹è¯•æŠ¥å‘Š
```

---

## æµ‹è¯•ç»„ä»¶

### 1. Mock é©±åŠ¨åº“ (`mock_driver/`)

Mock é©±åŠ¨åº“æ¨¡æ‹ŸçœŸå®çš„ `liblowlevel.so` ç¡¬ä»¶é©±åŠ¨ï¼Œæä¾›æ‰€æœ‰ç¡¬ä»¶æ¥å£çš„è½¯ä»¶å®ç°ã€‚

**ä¸»è¦åŠŸèƒ½ï¼š**

- æ¨¡æ‹Ÿ RF ä¿¡å·è¯»å–ï¼ˆå¹…åº¦ã€ç›¸ä½ï¼‰
- æ¨¡æ‹Ÿ BPM ä½ç½®æ•°æ®ï¼ˆX1/Y1, X2/Y2ï¼‰
- æ¨¡æ‹Ÿ White Rabbit æ—¶é—´æˆ³
- å‚æ•°è®¾ç½®å’Œè¯»å›
- æ•°å­— I/O æ¨¡æ‹Ÿ
- è§¦å‘å’Œå†å²æ•°æ®ç¼“å†²
- é”™è¯¯æ³¨å…¥æµ‹è¯•
- ç»Ÿè®¡ä¿¡æ¯æ”¶é›†

**ç¼–è¯‘ï¼š**

```bash
cd mock_driver
make
```

è¿™å°†ç”Ÿæˆï¼š
- `libmocklowlevel.so` - Mock é©±åŠ¨å…±äº«åº“
- `liblowlevel.so` - ç¬¦å·é“¾æ¥ï¼ˆç”¨äºæ›¿ä»£çœŸå®é©±åŠ¨ï¼‰

**æµ‹è¯•æ¥å£ç¤ºä¾‹ï¼š**

```c
// è®¾ç½®æµ‹è¯•æ¨¡å¼
mock_set_test_mode(1);

// é‡ç½® mock çŠ¶æ€
mock_reset_state();

// è®¾ç½® RF å‚æ•°
mock_set_rf_amplitude(3, 2.5);  // RF3 é€šé“ï¼Œå¹…åº¦ 2.5V
mock_set_rf_phase(3, 45.0);     // RF3 é€šé“ï¼Œç›¸ä½ 45 åº¦

// è®¾ç½® BPM ä½ç½®
mock_set_bpm_position(1.0, 2.0, 3.0, 4.0);  // X1, Y1, X2, Y2

// å¯ç”¨é”™è¯¯æ³¨å…¥
mock_enable_error_injection(1);

// è·å–ç»Ÿè®¡ä¿¡æ¯
MockStats* stats = mock_get_statistics();
printf("Reads: %d, Writes: %d, Errors: %d\n",
       stats->read_count, stats->write_count, stats->error_count);
```

### 2. å•å…ƒæµ‹è¯• (`unit_tests/`)

#### æµ‹è¯•æ¡†æ¶ç‰¹æ€§

è‡ªå®šä¹‰è½»é‡çº§æµ‹è¯•æ¡†æ¶ï¼Œç‰¹æ€§åŒ…æ‹¬ï¼š

- âœ… å¤šç§æ–­è¨€å®ï¼ˆ`ASSERT_TRUE`, `ASSERT_EQ`, `ASSERT_FLOAT_EQ` ç­‰ï¼‰
- âœ… å½©è‰²è¾“å‡ºï¼ˆé€šè¿‡/å¤±è´¥/è·³è¿‡ï¼‰
- âœ… æµ‹è¯•ç»Ÿè®¡å’Œæ±‡æ€»
- âœ… æ˜“äºç¼–å†™å’Œç»´æŠ¤

**æ–­è¨€å®ï¼š**

```c
ASSERT_TRUE(condition)                   // æ¡ä»¶ä¸ºçœŸ
ASSERT_FALSE(condition)                  // æ¡ä»¶ä¸ºå‡
ASSERT_EQ(expected, actual)              // ç›¸ç­‰æ–­è¨€
ASSERT_NE(not_expected, actual)          // ä¸ç­‰æ–­è¨€
ASSERT_FLOAT_EQ(expected, actual, eps)   // æµ®ç‚¹æ•°ç›¸ç­‰ï¼ˆå«å®¹å·®ï¼‰
ASSERT_STR_EQ(expected, actual)          // å­—ç¬¦ä¸²ç›¸ç­‰
ASSERT_NULL(ptr)                         // ç©ºæŒ‡é’ˆ
ASSERT_NOT_NULL(ptr)                     // éç©ºæŒ‡é’ˆ
```

**ç¼–å†™æµ‹è¯•ç¤ºä¾‹ï¼š**

```c
#include "test_framework.h"

TEST(my_test_name) {
    // æµ‹è¯•ä»£ç 
    int result = some_function();
    ASSERT_EQ(42, result);
}

int main(void) {
    TEST_SUITE_START("My Test Suite");

    RUN_TEST(my_test_name);

    TEST_SUITE_END();
    return TEST_RETURN_CODE();
}
```

#### å½“å‰æµ‹è¯•ç”¨ä¾‹

**`test_waveform.c` - æ³¢å½¢å¤„ç†æµ‹è¯•ï¼š**

- âœ… æ’å®š DC ä¿¡å·æµ‹è¯•
- âœ… çº¯æ­£å¼¦æ³¢æµ‹è¯•
- âœ… é˜¶è·ƒä¿¡å·æµ‹è¯•ï¼ˆèƒŒæ™¯æ‰£é™¤ï¼‰
- âœ… å«å™ªå£°ä¿¡å·æµ‹è¯•
- âœ… è„‰å†² RF ä¿¡å·æµ‹è¯•
- âœ… å¤šé€šé“æµ‹è¯•
- âœ… è¾¹ç•Œæ¡ä»¶æµ‹è¯•
- âœ… çœŸå® RF è…”ä¿¡å·ä»¿çœŸæµ‹è¯•

**`test_mock_driver.c` - Mock é©±åŠ¨æµ‹è¯•ï¼š**

- âœ… é©±åŠ¨åˆå§‹åŒ–æµ‹è¯•
- âœ… RF ä¿¡æ¯è·å–æµ‹è¯•
- âœ… BPM ä½ç½®è·å–æµ‹è¯•
- âœ… å‚æ•°è®¾ç½®æµ‹è¯•
- âœ… é”™è¯¯æ³¨å…¥æµ‹è¯•
- âœ… å†å²è§¦å‘æµ‹è¯•
- âœ… æ³¢å½¢æ•°æ®è·å–æµ‹è¯•
- âœ… æ•°å­— I/O æµ‹è¯•
- âœ… LED æ§åˆ¶æµ‹è¯•
- âœ… ADC æ—¶é’ŸçŠ¶æ€æµ‹è¯•
- âœ… White Rabbit æ—¶é—´æˆ³æµ‹è¯•
- âœ… ç»Ÿè®¡ä¿¡æ¯æµ‹è¯•

**è¿è¡Œå•å…ƒæµ‹è¯•ï¼š**

```bash
cd unit_tests
make test           # ç¼–è¯‘å¹¶è¿è¡Œæ‰€æœ‰æµ‹è¯•
make run            # ä»…è¿è¡Œæµ‹è¯•ï¼ˆå·²ç¼–è¯‘ï¼‰
./test_waveform     # è¿è¡Œå•ä¸ªæµ‹è¯•
```

### 3. æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨ (`test_data/`)

ç”Ÿæˆå„ç§æµ‹è¯•åœºæ™¯æ‰€éœ€çš„æ•°æ®æ–‡ä»¶ã€‚

**ç”Ÿæˆçš„æ•°æ®ç±»å‹ï¼š**

| æ–‡ä»¶å | æè¿° |
|--------|------|
| `sine_clean.csv` | çº¯å‡€æ­£å¼¦æ³¢ï¼ˆæ— å™ªå£°ï¼‰ |
| `sine_noisy.csv` | å«å™ªå£°æ­£å¼¦æ³¢ |
| `cavity_pulse.csv` | RF è…”è„‰å†²ï¼ˆæŒ‡æ•°è¡°å‡åŒ…ç»œï¼‰ |
| `step_signal.csv` | é˜¶è·ƒä¿¡å·ï¼ˆç”¨äºèƒŒæ™¯æ‰£é™¤æµ‹è¯•ï¼‰ |
| `noisy_baseline_low.csv` | ä½å™ªå£°åŸºçº¿ |
| `noisy_baseline_high.csv` | é«˜å™ªå£°åŸºçº¿ |
| `multitone.csv` | å¤šé¢‘ç‡æ··åˆä¿¡å· |
| `bpm_positions.csv` | BPM ä½ç½®æ•°æ®ï¼ˆå«æŸæµæŠ–åŠ¨ï¼‰ |
| `timestamps.csv` | White Rabbit æ—¶é—´æˆ³æ•°æ® |
| `test_parameters.csv` | æµ‹è¯•å‚æ•°é…ç½®æ–‡ä»¶ |

**è¿è¡Œæ•°æ®ç”Ÿæˆå™¨ï¼š**

```bash
cd test_data
make run
```

ç”Ÿæˆçš„æ–‡ä»¶ä½äº `test_data/output/` ç›®å½•ã€‚

**æ•°æ®æ ¼å¼ç¤ºä¾‹ï¼š**

```csv
# Sine wave: amplitude=2.00, frequency=0.0100, noise=no
# Sample, Channel0, Channel1, Channel2, Channel3, ...
0, 0.000000, 0.707107, 1.000000, 0.707107, ...
1, 0.062791, 0.758157, 1.000000, 0.641122, ...
...
```

---

## ä½¿ç”¨æ–¹æ³•

### æ–¹æ³• 1ï¼šä¸€é”®è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ¨èï¼‰

```bash
cd /home/user/BPMIOC/testbench
./scripts/run_tests.sh
```

**è¾“å‡ºï¼š**
- å½©è‰²æ§åˆ¶å°è¾“å‡ºï¼Œæ˜¾ç¤ºæ¯ä¸ªæµ‹è¯•çš„çŠ¶æ€
- æµ‹è¯•æŠ¥å‘Šä¿å­˜åˆ° `logs/test_report_YYYYMMDD_HHMMSS.txt`
- è¿”å›å€¼ï¼š0 = æˆåŠŸï¼Œ1 = å¤±è´¥

### æ–¹æ³• 2ï¼šä½¿ç”¨ Makefile

```bash
cd /home/user/BPMIOC/testbench

# ç¼–è¯‘æ‰€æœ‰ç»„ä»¶
make all

# ç¼–è¯‘å¹¶è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test

# åªè¿è¡Œå•å…ƒæµ‹è¯•ï¼ˆè·³è¿‡æ•°æ®ç”Ÿæˆï¼‰
make run-unit-tests

# åªç”Ÿæˆæµ‹è¯•æ•°æ®
make run-test-data

# å¿«é€Ÿæµ‹è¯•ï¼ˆä¸é‡æ–°ç¼–è¯‘ï¼‰
make quick-test

# æ¸…ç†
make clean

# æ˜¾ç¤ºå¸®åŠ©
make help
```

### æ–¹æ³• 3ï¼šåˆ†æ­¥æ‰§è¡Œ

```bash
# 1. ç¼–è¯‘ mock é©±åŠ¨
cd mock_driver
make

# 2. ç¼–è¯‘å•å…ƒæµ‹è¯•
cd ../unit_tests
make

# 3. è¿è¡Œæµ‹è¯•
make test

# 4. ç”Ÿæˆæµ‹è¯•æ•°æ®
cd ../test_data
make run
```

---

## æ·»åŠ æ–°æµ‹è¯•

### æ·»åŠ æ–°çš„å•å…ƒæµ‹è¯•

1. **åˆ›å»ºæµ‹è¯•æ–‡ä»¶** `unit_tests/test_myfeature.c`ï¼š

```c
#include "test_framework.h"
#include "../mock_driver/mock_lowlevel.h"  // å¦‚æœéœ€è¦

TEST(feature_basic_test) {
    // åˆå§‹åŒ–
    mock_reset_state();

    // æµ‹è¯•é€»è¾‘
    int result = my_function(42);

    // æ–­è¨€
    ASSERT_EQ(42, result);
}

TEST(feature_edge_case) {
    // è¾¹ç•Œæ¡ä»¶æµ‹è¯•
    ASSERT_TRUE(my_function(0) == 0);
}

int main(void) {
    TEST_SUITE_START("My Feature Tests");

    RUN_TEST(feature_basic_test);
    RUN_TEST(feature_edge_case);

    TEST_SUITE_END();
    return TEST_RETURN_CODE();
}
```

2. **æ›´æ–° Makefile**ï¼š

åœ¨ `unit_tests/Makefile` ä¸­æ·»åŠ ï¼š

```makefile
TESTS = test_waveform test_mock_driver test_myfeature

test_myfeature: test_myfeature.c test_framework.h
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)
```

3. **è¿è¡Œæµ‹è¯•**ï¼š

```bash
cd unit_tests
make test
```

### æ·»åŠ æ–°çš„æµ‹è¯•æ•°æ®ç±»å‹

åœ¨ `test_data/generate_test_data.c` ä¸­æ·»åŠ ç”Ÿæˆå‡½æ•°ï¼š

```c
void generate_my_data(const char* filename) {
    FILE* fp = fopen(filename, "w");
    // ... ç”Ÿæˆæ•°æ®
    fclose(fp);
}

int main() {
    // ...
    generate_my_data("output/my_data.csv");
    // ...
}
```

---

## æµ‹è¯•è¦†ç›–èŒƒå›´

### å·²è¦†ç›–åŠŸèƒ½

âœ… æ³¢å½¢æ•°æ®å¤„ç†
âœ… RF ä¿¡å·è¯»å–
âœ… BPM ä½ç½®è®¡ç®—
âœ… èƒŒæ™¯æ‰£é™¤ç®—æ³•
âœ… å‚æ•°è®¾ç½®å’Œè¯»å›
âœ… æ•°å­— I/O æ“ä½œ
âœ… White Rabbit æ—¶é—´æˆ³
âœ… è§¦å‘å’Œå†å²ç¼“å†²
âœ… é”™è¯¯å¤„ç†

### å¾…æ‰©å±•åŠŸèƒ½

- [ ] EPICS è®°å½•å±‚é›†æˆæµ‹è¯•
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] é•¿æ—¶é—´ç¨³å®šæ€§æµ‹è¯•
- [ ] å¤šçº¿ç¨‹å¹¶å‘æµ‹è¯•
- [ ] å†…å­˜æ³„æ¼æ£€æµ‹
- [ ] CSV å‚æ•°æ–‡ä»¶è§£ææµ‹è¯•

---

## å¸¸è§é—®é¢˜

### Q: ç¼–è¯‘æ—¶æ‰¾ä¸åˆ° mock_lowlevel.h

**A:** ç¡®ä¿åœ¨ç¼–è¯‘å•å…ƒæµ‹è¯•å‰å…ˆç¼–è¯‘ mock é©±åŠ¨ï¼š

```bash
make mock
make unit-tests
```

æˆ–è€…ç›´æ¥ï¼š

```bash
make all
```

### Q: è¿è¡Œæµ‹è¯•æ—¶æŠ¥é”™ "cannot open shared object file"

**A:** éœ€è¦è®¾ç½® `LD_LIBRARY_PATH`ï¼š

```bash
export LD_LIBRARY_PATH=../mock_driver:$LD_LIBRARY_PATH
./test_waveform
```

æˆ–è€…ä½¿ç”¨ Makefileï¼š

```bash
make test  # è‡ªåŠ¨è®¾ç½®è·¯å¾„
```

### Q: å¦‚ä½•è°ƒè¯•å•ä¸ªæµ‹è¯•ï¼Ÿ

**A:** ä½¿ç”¨ GDBï¼š

```bash
cd unit_tests
gdb ./test_waveform
(gdb) run
```

### Q: å¦‚ä½•åªè¿è¡Œç‰¹å®šçš„æµ‹è¯•ï¼Ÿ

**A:** ä¿®æ”¹æµ‹è¯•æ–‡ä»¶çš„ `main()` å‡½æ•°ï¼Œæ³¨é‡Šæ‰ä¸éœ€è¦çš„ `RUN_TEST()` è°ƒç”¨ï¼š

```c
int main(void) {
    TEST_SUITE_START("My Tests");

    RUN_TEST(test_case_1);
    // RUN_TEST(test_case_2);  // æš‚æ—¶è·³è¿‡

    TEST_SUITE_END();
    return TEST_RETURN_CODE();
}
```

### Q: æµ‹è¯•æ•°æ®æ–‡ä»¶å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ

**A:** ç”Ÿæˆçš„æ•°æ®æ–‡ä»¶ä½äº `testbench/test_data/output/` ç›®å½•ã€‚

### Q: å¦‚ä½•é›†æˆåˆ° CI/CD æµç¨‹ï¼Ÿ

**A:** ä½¿ç”¨æµ‹è¯•è„šæœ¬å¹¶æ£€æŸ¥è¿”å›å€¼ï¼š

```bash
#!/bin/bash
cd testbench
./scripts/run_tests.sh
if [ $? -eq 0 ]; then
    echo "Tests passed"
    exit 0
else
    echo "Tests failed"
    exit 1
fi
```

---

## æ€§èƒ½æŒ‡æ ‡

åœ¨æ ‡å‡† Linux ç³»ç»Ÿä¸Šçš„å…¸å‹è¿è¡Œæ—¶é—´ï¼š

- Mock é©±åŠ¨ç¼–è¯‘ï¼š< 1 ç§’
- å•å…ƒæµ‹è¯•ç¼–è¯‘ï¼š< 2 ç§’
- å•å…ƒæµ‹è¯•æ‰§è¡Œï¼š< 1 ç§’
- æµ‹è¯•æ•°æ®ç”Ÿæˆï¼š< 1 ç§’
- **æ€»æ—¶é—´ï¼š< 5 ç§’**

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æ·»åŠ æ–°çš„æµ‹è¯•ç”¨ä¾‹ï¼è¯·éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

1. æµ‹è¯•å‡½æ•°å‘½åï¼š`test_<feature>_<scenario>`
2. æ¯ä¸ªæµ‹è¯•åº”è¯¥ç‹¬ç«‹ï¼Œä¸ä¾èµ–å…¶ä»–æµ‹è¯•çš„çŠ¶æ€
3. ä½¿ç”¨ `mock_reset_state()` é‡ç½® mock çŠ¶æ€
4. æ·»åŠ æ³¨é‡Šè¯´æ˜æµ‹è¯•ç›®çš„
5. ä½¿ç”¨é€‚å½“çš„æ–­è¨€å®
6. æ›´æ–° README æ–‡æ¡£

---

## è®¸å¯è¯

ä¸ä¸»é¡¹ç›®ä¿æŒä¸€è‡´ã€‚

---

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

**ç¥æµ‹è¯•æ„‰å¿«ï¼** ğŸ‰
